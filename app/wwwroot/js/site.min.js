function loadChart(){var t=[{theTime:"2016-09-20",Magnitude:1,Tsunami:0,Amount:24},{theTime:"2016-09-20",Magnitude:1,Tsunami:0,Amount:24},{theTime:"2016-09-20",Magnitude:2,Tsunami:0,Amount:24},{theTime:"2016-09-21",Magnitude:1,Tsunami:0,Amount:24}],o=_.groupBy(t,"theTime"),c,e,l;_.forEach(o,function(n,t){o[t]=_.countBy(n,"Magnitude")});var n={top:20,right:20,bottom:30,left:40},i=200,r=40,s=20,u=d3.scaleLinear().domain([0,d3.max(t)]).range([0,i]),a=d3.scaleOrdinal().domain([0,t.length]).range([0,t.length*(r+s)]),f=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),h=d3.select(".chart");h.attr("width",720).attr("height",i).selectAll("rect").data(t).enter().append("rect").attr("width",r).attr("height",function(n){return u(n)}).attr("x",function(t,i){return n.left+i*(r+s)}).attr("y",function(t){return i-u(t)-n.bottom}).on("mouseover",function(n){f.transition().duration(200).style("opacity",.9);f.html(n).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(){f.transition().duration(500).style("opacity",0)});c=d3.axisLeft(u).ticks(5,"s");e=h.attr("transform","translate("+n.left+","+n.top+")");e.append("g").attr("transform","translate("+n.left+", -"+n.bottom+")").call(c);l=d3.axisBottom(a).ticks(t.length,"s");console.log(i);e.append("g").attr("transform","translate("+n.left+","+(i-n.bottom)+")").call(l)}window.onload=loadChart;